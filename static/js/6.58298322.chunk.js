(this.webpackJsonp=this.webpackJsonp||[]).push([[6],{438:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(4),a=r.n(n),o=r(1),i=r.n(o),c=r(448),l=r.n(c),u=r(63);function s(e){return i.a.createElement(u.f,a()({ModalComponent:f},e),e.children)}function f(e){return i.a.createElement(l.a,a()({ariaHideApp:!1},e),e.children)}},440:function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return c}));var n=r(64),a=r.n(n),o=/^\d{2}\/\d{2}\/\d{4}$/,i=function(e){if(!o.test(e))throw new Error("date must have the form dd/mm/yyyy");var t=e.split("/"),r=a()(t,3),n=r[0],i=r[1],c=r[2],l=new Date;return l.setUTCDate(Number(n)),l.setUTCMonth(Number(i)-1),l.setUTCFullYear(Number(c)),l.getTime()},c=function(e){var t=new Date(e),r=t.getUTCDate(),n=r<10?"0"+r:""+r,a=t.getUTCMonth()+1;return n+"/"+(a<10?"0"+a:""+a)+"/"+t.getFullYear()}},508:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return K}));var n=r(1),a=r.n(n),o=r(7),i=r.n(o),c=r(64),l=r.n(c);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f={sortBy:{rating:!0,date:!0,price:!0},filterBy:{area:"",color:"",grape:"",sweetness:""},updateSortBy:function(e,t){},updateFilterBy:function(e,t){}},d=a.a.createContext(f);function m(e){var t=Object(n.useState)(f.sortBy),r=l()(t,2),o=r[0],c=r[1],u=Object(n.useState)(f.filterBy),m=l()(u,2),y=m[0],b=m[1],p=Object(n.useMemo)((function(){return function(e,t){c(s(s({},o),{},i()({},e,t)))}}),[o,c]),v=Object(n.useMemo)((function(){return function(e,t){b(s(s({},y),{},i()({},e,t)))}}),[y,b]);return a.a.createElement(d.Provider,{value:{sortBy:o,updateSortBy:p,filterBy:y,updateFilterBy:v}},e.children)}var y=r(14),b=r.n(y),p=r(2),v=r(3),h=r(442),E=r(8),O=r(40),g=r(91),w=r(22),j=r(24),S=r(440);function B(e){var t=e.item;return a.a.createElement(j.a,{onPress:function(){e.pushHistory("/edit-wine/"+t.RowKey)}},a.a.createElement(v.a,{style:P.wineItem},a.a.createElement(w.a,null,t.rating," ",Object(S.a)(t.date)," ",t.color," ",t.sweetness)))}var P=p.a.create({wineItem:{borderStyle:"solid",borderColor:"black",borderWidth:1,padding:15}}),x=r(63),C=r(438);function k(e){var t=Object(n.useContext)(d),r=t.sortBy,o=t.updateSortBy,i=function(){o(e.field,!r[e.field])};return a.a.createElement(v.a,{style:I.container},a.a.createElement(x.g,{style:I.text},D(e.field)),a.a.createElement(x.b,{title:"\u2193",checked:r[e.field],onPress:i}),a.a.createElement(x.b,{title:"\u2191",checked:!r[e.field],onPress:i}))}var D=function(e){return e[0].toUpperCase()+e.slice(1)},I=p.a.create({container:{width:"100%",flexDirection:"row"},text:{alignSelf:"center",fontWeight:"bold",flexGrow:1}});function T(e){return a.a.createElement(C.a,e,a.a.createElement(v.a,{style:{alignItems:"flex-start"}},a.a.createElement(k,{field:"date"}),a.a.createElement(k,{field:"rating"}),a.a.createElement(k,{field:"price"}),a.a.createElement(x.a,{containerStyle:{width:"100%"},title:"Close",onPress:e.onBackdropPress})))}function A(e){var t=Object(n.useContext)(d),r=t.filterBy,o=t.updateFilterBy,i=Object(n.useCallback)((function(t){o(e.field,t)}),[o]);return a.a.createElement(x.e,{label:e.field,placeholder:" = ?",value:r[e.field],onChangeText:i})}function M(e){return a.a.createElement(C.a,e,a.a.createElement(v.a,{style:{alignItems:"flex-start"}},a.a.createElement(A,{field:"color"}),a.a.createElement(A,{field:"sweetness"}),a.a.createElement(A,{field:"area"}),a.a.createElement(x.a,{containerStyle:{width:"100%"},title:"Close",onPress:e.onBackdropPress})))}function R(){var e=Object(n.useState)(!1),t=l()(e,2),r=t[0],o=t[1],i=Object(n.useState)(!1),c=l()(i,2),u=c[0],s=c[1];return a.a.createElement(v.a,{style:U.container},a.a.createElement(x.a,{title:"Sort by",containerStyle:{flexGrow:1,borderRadius:8,marginRight:8},onPress:function(){o(!0)}}),a.a.createElement(x.a,{title:"Filter by",containerStyle:{flexGrow:1,borderRadius:8},onPress:function(){s(!0)}}),a.a.createElement(T,{isVisible:r,onBackdropPress:function(){o(!1)}}),a.a.createElement(M,{isVisible:u,onBackdropPress:function(){s(!1)}}))}var U=p.a.create({container:{flex:1,flexDirection:"row",marginBottom:8}});function F(e,t){var r;if("undefined"===typeof Symbol||null==e["function"===typeof Symbol?Symbol.iterator:"@@iterator"]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return H(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e["function"===typeof Symbol?Symbol.iterator:"@@iterator"]()).next.bind(r)}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var G=["date","rating","price"],N=["color","sweetness","area","grape"];function W(){var e=Object(n.useContext)(g.a),t=e.wines,r=e.getWines,o=Object(n.useContext)(d),i=o.sortBy,c=o.filterBy,u=Object(n.useState)(!1),s=l()(u,2),f=s[0],m=s[1],y=Object(O.e)(),p=Object(n.useCallback)((function(){return b.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,b.a.awrap(r());case 3:m(!0);case 4:case"end":return e.stop()}}),null,null,null,Promise)}),[r,m]),w=Object(n.useMemo)((function(){return function(e,t){return Object.values(e).sort((function(e,r){for(var n,a=F(G);!(n=a()).done;){var o=n.value,i=t[o];if(void 0!==e[o]&&void 0!==r[o])if(i){if(r[o]>e[o])return 1;if(r[o]<e[o])return-1}else{if(r[o]>e[o])return-1;if(r[o]<e[o])return 1}}return 0}))}(function(e,t){return Object.keys(e).reduce((function(r,n){for(var a,o=e[n],i=F(N);!(a=i()).done;){var c=a.value,l=t[c].trim();if(""!==l&&o[c]!==l.toLowerCase())return r}return r[n]=o,r}),{})}(t,c),i)}),[t,i,c]);return a.a.createElement(v.a,{style:J.container},"web"===E.a.OS&&a.a.createElement(x.a,{style:{marginBottom:4},disabled:f,title:"Refresh",onPress:p}),a.a.createElement(h.a,{ListHeaderComponent:R,data:w,keyExtractor:function(e){return e.RowKey},renderItem:function(e){return a.a.createElement(B,{item:e.item,pushHistory:y.push})},refreshing:f,onRefresh:p}))}var J=p.a.create({container:{flex:1}});function K(){return a.a.createElement(m,null,a.a.createElement(W,null))}}}]);
//# sourceMappingURL=6.58298322.chunk.js.map